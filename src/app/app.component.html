<!-- Diálogo de carga masiva de tareas -->
<app-bulk-task-dialog
  *ngIf="showBulkDialog"
  (tasksBulkAdded)="onTasksBulkAdded($event)"
  (dialogClosed)="showBulkDialog = false"
></app-bulk-task-dialog>
<div class="container">
  <header class="header">
    <h1>{{ title }}</h1>
    <button class="btn btn-primary" (click)="addTask()">
      <span class="icon">+</span>
      Agregar Tarea
    </button>
    <!-- Botón para abrir el diálogo de carga masiva de tareas -->
    <button class="btn btn-secondary" (click)="openBulkDialog()">
      <span class="icon">&#128190;</span>
      Carga masiva
    </button>
  </header>

  <main class="main-content">
    <div class="table-container">
      <table class="task-table" *ngIf="tasks.length > 0; else emptyState">
        <thead>
          <tr>
            <th>ID</th>
            <th>Título</th>
            <th>Duración (minutos)</th>
            <!-- Se elimina la columna de acciones para que la edición/eliminación se realice desde el diálogo -->
          </tr>
        </thead>
        <tbody>
          <tr 
            *ngFor="let task of tasks" 
            [class.selected]="isTaskSelected(task)"
            (click)="selectTask(task)"
            class="task-row"
          >
            <td>{{ task.id }}</td>
            <td>{{ task.title }}</td>
            <td>{{ task.duration }}</td>
            <!-- Se elimina el botón de eliminar, ahora la edición/eliminación será desde el diálogo -->
          </tr>
        </tbody>
      </table>

      <ng-template #emptyState>
        <div class="empty-state">
          <div class="empty-icon">📝</div>
          <h3>No hay tareas</h3>
          <p>Haz clic en "Agregar Tarea" para comenzar</p>
        </div>
      </ng-template>
    </div>

    <div class="info-panel" *ngIf="selectedTask">
      <h3>Tarea Seleccionada</h3>
      <div class="task-info">
        <p><strong>ID:</strong> {{ selectedTask.id }}</p>
        <p><strong>Título:</strong> {{ selectedTask.title }}</p>
        <p><strong>Duración:</strong> {{ selectedTask.duration }} minutos</p>
      </div>
  <!-- Botón de eliminar removido, ahora la eliminación se realiza desde el diálogo de edición -->
    </div>
  </main>
</div>

<!-- El diálogo ahora soporta edición y eliminación, se le pasa la tarea a editar si existe -->
<app-add-task-dialog 
  *ngIf="showDialog"
  [taskToEdit]="taskToEdit"
  (taskAdded)="onTaskAdded($event)"
  (taskEdited)="onTaskEdited($event)"
  (taskDeleted)="onTaskDeleted($event)"
  (dialogClosed)="onDialogClosed()"
></app-add-task-dialog>
